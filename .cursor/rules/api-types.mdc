# API ê°œë°œ ë° íƒ€ì… ê´€ë¦¬ ê°€ì´ë“œ

## ğŸ”— API ì—°ë™ ì•„í‚¤í…ì²˜

### ë°±ì—”ë“œ â†” í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì… ë™ê¸°í™”
ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ê°„ íƒ€ì…ì€ ë‹¤ìŒê³¼ ê°™ì´ ë™ê¸°í™”í•©ë‹ˆë‹¤:

**ë°±ì—”ë“œ íƒ€ì…**: [backend/src/common/interfaces/](mdc:backend/src/common/interfaces/)
**í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì…**: [frontend/src/types/index.ts](mdc:frontend/src/types/index.ts)

### ì£¼ìš” íƒ€ì… ì •ì˜

#### ì–¼êµ´í˜• ë¶„ì„ ê²°ê³¼
```typescript
export interface FaceAnalysisResult {
  faceShape: 'oval' | 'round' | 'oblong' | 'square' | 'heart' | 'inverted_triangle';
  description: string;
  confidence: number;  // 0.0 ~ 1.0
  landmarks?: any[];   // MediaPipe ì—°ë™ í›„ ì‚¬ìš©
}
```

#### í—¤ì–´ìŠ¤íƒ€ì¼ ì¶”ì²œ
```typescript
export interface HairStyleRecommendation {
  id: string;
  name: string;
  description: string;
  imageUrl: string;
  celebrity: {
    name: string;
    imageUrl: string;
  };
  tags: string[];
}
```

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸ ê·œê²©

### ì–¼êµ´í˜• ë¶„ì„ API
```typescript
// POST /face-analysis/analyze
interface AnalyzeRequest {
  image: File  // multipart/form-data
}

interface AnalyzeResponse extends FaceAnalysisResult {}
```

### í—¤ì–´ìŠ¤íƒ€ì¼ ì¶”ì²œ API
```typescript
// GET /recommendations/hair-styles
interface RecommendationRequest {
  faceShape: FaceShapeType;
  gender: 'male' | 'female';
}

interface RecommendationResponse {
  recommendations: HairStyleRecommendation[];
  totalCount: number;
}
```

## ğŸ› ï¸ API í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©ë²•

### API ì„œë¹„ìŠ¤ ([api.ts](mdc:frontend/src/services/api.ts))
```typescript
// ì–¼êµ´ ë¶„ì„
const analysisResult = await faceAnalysisApi.analyzeFace(imageFile);

// í—¤ì–´ìŠ¤íƒ€ì¼ ì¶”ì²œ
const recommendations = await recommendationApi.getHairStyleRecommendations(
  'heart',
  'female'
);

// ì—°ì˜ˆì¸ ë ˆí¼ëŸ°ìŠ¤
const celebrities = await recommendationApi.getCelebrityReferences(styleId);
```

### ì—ëŸ¬ ì²˜ë¦¬
```typescript
try {
  const result = await faceAnalysisApi.analyzeFace(imageFile);
  // ì„±ê³µ ì²˜ë¦¬
} catch (error) {
  console.error('API ì—ëŸ¬:', error);
  // ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
  alert('ì–¼êµ´í˜• ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
}
```

## ğŸ—‚ï¸ ë°ì´í„° êµ¬ì¡°

### ì–¼êµ´í˜•ë³„ ì¶”ì²œ ë°ì´í„° êµ¬ì¡°
```typescript
// backend/src/recommendation/recommendation.service.ts
private readonly hairStyleData = {
  heart: {
    male: [
      {
        id: 'heart-m-1',
        name: 'ì‚¬ì´ë“œ íŒŒíŠ¸ ìŠ¤íƒ€ì¼',
        description: 'ì˜†ìœ¼ë¡œ ë‚˜ëˆˆ í—¤ì–´ë¡œ ì´ë§ˆë¥¼ ì ë‹¹íˆ ê°€ë ¤ì£¼ëŠ” ìŠ¤íƒ€ì¼',
        celebrity: { name: 'ë°•ë³´ê²€', imageUrl: '/images/celebrities/park-bogum.jpg' },
        tags: ['ì‚¬ì´ë“œíŒŒíŠ¸', 'í´ë˜ì‹', 'ê¹”ë”']
      }
    ],
    female: [/* ì—¬ì„±ìš© ìŠ¤íƒ€ì¼ë“¤ */]
  },
  // ë‹¤ë¥¸ ì–¼êµ´í˜•ë“¤...
}
```

### ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ê´€ë¦¬
```typescript
// í˜ì´ì§€ ê°„ ë°ì´í„° ì „ë‹¬ì„ ìœ„í•œ ìƒíƒœ íƒ€ì…
export interface AppState {
  gender: GenderType | null;
  selectedImage: File | null;
  imagePreview: string | null;
  analysisResult: FaceAnalysisResult | null;
  recommendations: HairStyleRecommendation[];
}
```

## ğŸ”§ í™˜ê²½ ì„¤ì •

### API URL ì„¤ì •
```typescript
// frontend/src/services/api.ts
const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001'
```

### í™˜ê²½ë³€ìˆ˜
```bash
# backend/.env
PORT=3001
NODE_ENV=development

# frontend/.env  
VITE_API_URL=http://localhost:3001
```

## âš ï¸ ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­
- íƒ€ì… ë³€ê²½ ì‹œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë‘ ì—…ë°ì´íŠ¸ í•„ìš”
- API ì‘ë‹µ í˜•ì‹ ë³€ê²½ ì‹œ ì–‘ìª½ ì½”ë“œ ë™ê¸°í™” í™•ì¸
- íŒŒì¼ ì—…ë¡œë“œëŠ” 5MB ì œí•œ (ë°±ì—”ë“œ ì„¤ì •)
- ê°œë°œí™˜ê²½ì—ì„œëŠ” CORS í—ˆìš©ë˜ì§€ë§Œ í”„ë¡œë•ì…˜ì—ì„œëŠ” ë„ë©”ì¸ ì œí•œ í•„ìš”
